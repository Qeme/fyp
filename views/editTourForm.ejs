<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Change Tournament Name</title>
</head>
<body>
    <h1>Change Tournament Name</h1>
    <form id="tournamentForm">
        <label for="tournamentName">New Tournament Name:</label>
        <input type="text" id="tournamentName" name="tournamentName" required>
        <button type="submit">Submit</button>
    </form>

    <script>
        document.getElementById("tournamentForm").addEventListener("submit", function(event) {
            event.preventDefault(); // Prevent default form submission
            const tournamentName = document.getElementById("tournamentName").value;

            // Make a PUT request to update the tournament name
            fetch('/tournamentinfo/:id', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ name: tournamentName }) // Send the new tournament name in JSON format
            })
            .then(response => {
                if (response.ok) {
                    // Redirect to tournamentinfo.ejs upon successful update
                    window.location.href = '/tournamentinfo.ejs';
                } else {
                    throw new Error('Error updating tournament name');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                // Handle any errors and display an appropriate message to the user
                alert('Error updating tournament name. Please try again later.');
            });
        });
    </script>
</body>
</html> -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Tournament Information</title>
</head>
<body>
    <h1>Edit Tournament Information</h1>
    <!-- dynamically change the method to PUT from POST -->
    <form action="/tournamentinfo/<%= tournament.id %>?_method=PUT" method="POST">
        <!-- <div class="tournament-info"> -->
            <input type="hidden" name="id" value="<%= tournament._id %>">
            <!-- <div class="name"> -->
                <label for="name">Tournament Name:</label>
                <input type="text" id="name" name="name" value="<%= tournament.name %>"><br>
            <!-- </div> -->
            <!-- <div class="meta-info"> -->
                <!-- the id mention here must point to meta->game then works -->
                <label for="meta.game">Game:</label>
                <input type="text" id="meta.game" name="meta.game" value="<%= tournament.meta.game %>"><br>
                <!-- <label for="platform">Platform:</label>
                <input type="text" id="platform" name="platform" value="<%= tournament.meta.platform %>"><br>
                <label for="venue">Venue:</label>
                <input type="text" id="venue" name="venue" value="<%= tournament.meta.venue %>"><br>
                <label for="registerOpen">Registration Period (Open):</label>
                <input type="date" id="registerOpen" name="registerOpen" value="<%= tournament.meta.register.open %>"><br>
                <label for="registerClose">Registration Period (Close):</label>
                <input type="date" id="registerClose" name="registerClose" value="<%= tournament.meta.register.close %>"><br>
                <label for="runningStart">Running Period (Start):</label>
                <input type="date" id="runningStart" name="runningStart" value="<%= tournament.meta.running.start %>"><br>
                <label for="runningEnd">Running Period (End):</label>
                <input type="date" id="runningEnd" name="runningEnd" value="<%= tournament.meta.running.end %>"><br>
                <label for="checkin">Check-in Required:</label>
                <input type="checkbox" id="checkin" name="checkin" <%= tournament.meta.checkin ? 'checked' : '' %>><br>
                <label for="competitorTicket">Competitor Ticket Price:</label>
                <input type="number" id="competitorTicket" name="competitorTicket" value="<%= tournament.meta.ticket.competitor %>"><br>
                <label for="viewerTicket">Viewer Ticket Price:</label>
                <input type="number" id="viewerTicket" name="viewerTicket" value="<%= tournament.meta.ticket.viewer %>"><br>
                <label for="notificationRules">Notification Rules:</label>
                <input type="text" id="notificationRules" name="notificationRules" value="<%= tournament.meta.notification.rules %>"><br>
                <label for="regulation">Regulation:</label>
                <textarea id="regulation" name="regulation"><%= tournament.meta.notification.regulation %></textarea><br> -->
             <!-- </div> -->
            <!-- <div class="setting-info">
                <h3>Settings</h3>
                <strong>Stage One:</strong> <%= tournament.setting.stageOne.format %> format<br>
                <strong>Initial Round:</strong> <%= tournament.setting.stageOne.initialRound %><br>
                <strong>Max Players:</strong> <%= tournament.setting.stageOne.maxPlayers %><br> --> 
                <!-- Add input fields for other settings if needed -->
                <!-- <strong>Status:</strong> <%= tournament.setting.status %><br>
            </div> -->

        <!-- </div> -->
        <input type="submit" value="Update Tournament">
    </form>
</body>
</html>
